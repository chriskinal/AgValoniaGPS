<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:AgValoniaGPS.ViewModels"
        xmlns:controls="using:AgValoniaGPS.Desktop.Views.Controls"
        mc:Ignorable="d" d:DesignWidth="1366" d:DesignHeight="768"
        x:Class="AgValoniaGPS.Desktop.Views.MainWindow"
        x:DataType="vm:MainViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="AgValoniaGPS"
        Width="1366" Height="768"
        WindowState="Maximized"
        Background="#1a1a1a"
        SizeChanged="Window_SizeChanged">

    <!-- Main Layout: Custom Status Bar + Content Area -->
    <Grid RowDefinitions="Auto,*">

        <!-- Custom Top Status Bar (matches old AgOpenGPS) -->
        <Border Grid.Row="0" Background="#1a1a1a" Height="60" BorderThickness="0">
            <Grid ColumnDefinitions="Auto,Auto,Auto,*,Auto,Auto,Auto,Auto,Auto,Auto">

                <!-- Section Control Indicator (3 colored bars) -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="8,0,12,0" VerticalAlignment="Center">
                    <Rectangle Width="40" Height="8" Fill="#90EE90" Margin="0,0,2,0"/>
                    <Rectangle Width="40" Height="8" Fill="#FFD700" Margin="0,0,2,0"/>
                    <Rectangle Width="40" Height="8" Fill="#FF6B6B"/>
                </StackPanel>

                <!-- GPS Status -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="8,0" VerticalAlignment="Center">
                    <Image Source="/Assets/Icons/GPSQuality.png" Width="28" Height="28" Margin="0,0,6,0"/>
                    <TextBlock Text="RTK fix: Age: 0.0" VerticalAlignment="Center" FontSize="13" Foreground="White"/>
                </StackPanel>

                <!-- Rotating Information Display with Play/Pause Button -->
                <Border Grid.Column="2" Background="Transparent" BorderBrush="#808080" BorderThickness="1"
                        Padding="10,6" Margin="6,0" CornerRadius="2">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="▶" FontSize="14" VerticalAlignment="Center" Foreground="White"/>
                        <TextBlock Text="Line: No Guidance Lines" FontSize="13" VerticalAlignment="Center"
                                   Foreground="White" FontWeight="SemiBold"/>
                    </StackPanel>
                </Border>

                <!-- Speed Display -->
                <Border Grid.Column="4" Background="#FFE4B5" Padding="14,8" Margin="6,0" CornerRadius="2">
                    <TextBlock Text="{Binding Speed, StringFormat={}{0:F2}}" FontSize="18" FontWeight="Bold"
                               Foreground="Black" VerticalAlignment="Center"/>
                </Border>

                <!-- GPS Signal Strength / Satellite Count -->
                <Border Grid.Column="5" Background="White" Padding="10,6" Margin="6,0" CornerRadius="2">
                    <TextBlock Text="{Binding SatelliteCount}" FontSize="15" FontWeight="Bold"
                               Foreground="Black" VerticalAlignment="Center"/>
                </Border>

                <!-- Orange Progress Bar -->
                <ProgressBar Grid.Column="6" Width="100" Height="8" Value="65" Maximum="100"
                             Foreground="#FF8C00" Background="#E0E0E0" Margin="6,0" VerticalAlignment="Center"/>

                <!-- Home Button (Reset Buttons) -->
                <Button Grid.Column="7" Width="50" Height="44" Background="#4CAF50"
                        BorderThickness="0" Margin="4,0,0,0"
                        ToolTip.Tip="Reset all buttons to home position"
                        Click="BtnHomeButtons_Click"
                        CornerRadius="4">
                    <TextBlock Text="🏠" FontSize="20" VerticalAlignment="Center"/>
                </Button>

                <!-- Minimize Button -->
                <Button Grid.Column="8" Width="44" Height="44" Background="Transparent"
                        BorderThickness="0" Margin="4,0,0,0"
                        Content="−" FontSize="24" FontWeight="Bold" Foreground="Black"/>

                <!-- Close Button -->
                <Button Grid.Column="9" Width="44" Height="44" Background="#DC3545"
                        BorderThickness="0" Margin="4,0,8,0"
                        Content="✕" FontSize="20" FontWeight="Bold" Foreground="White"/>
            </Grid>
        </Border>

        <!-- Main Content Area: Field Map (full screen) -->
        <Grid Grid.Row="1">

            <!-- 2D Field Map Control (Default) -->
            <!-- To use OpenGL 3D renderer, uncomment the line below and comment out the 2D control -->
            <Border x:Name="MapContainer"
                    Background="Black"
                    ZIndex="0">
                <!-- <controls:FieldMapControl /> -->
                <!-- 3D OpenGL Renderer (uncomment to use): -->
                <controls:OpenGLFieldMapControl
                    x:Name="OpenGLControl"
                    IsHitTestVisible="True"
                    Focusable="True"/>
            </Border>

        </Grid>

        <!-- Navigation Overlay: Touch-Friendly Transparent Panel -->
        <Border Grid.Row="1"
                x:Name="PanelNavigation"
                IsVisible="False"
                Background="#CC1a1a1a"
                Width="650" Height="450"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                CornerRadius="8"
                BoxShadow="0 8 16 0 #80000000">
            <Grid RowDefinitions="Auto,*">
                <!-- Draggable Header with title and close button -->
                <Border Grid.Row="0" Background="#402a2a2a" Padding="16,12" CornerRadius="8,8,0,0"
                        x:Name="PanelNavigationHeader"
                        PointerPressed="PanelNavigationHeader_PointerPressed"
                        PointerMoved="PanelNavigationHeader_PointerMoved"
                        PointerReleased="PanelNavigationHeader_PointerReleased"
                        Cursor="Hand">
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Grid.Column="0" Text="Navigation &amp; Display" FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                        <Button Grid.Column="1" Width="40" Height="40" Background="Transparent" BorderThickness="0"
                                Content="✕" FontSize="20" Foreground="White" Click="BtnNavigation_Click"
                                ToolTip.Tip="Close"/>
                    </Grid>
                </Border>

                <!-- 2-column grid layout -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto" Margin="8">
                        <!-- Row 0, Col 0: Tilt Down -->
                        <Button Grid.Row="0" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding TiltDownCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/TiltDown.png" Width="54" Height="54"/>
                                <TextBlock Text="Tilt Down" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 0, Col 1: Tilt Up -->
                        <Button Grid.Row="0" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding TiltUpCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/TiltUp.png" Width="54" Height="54"/>
                                <TextBlock Text="Tilt Up" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 0: Camera 2D -->
                        <Button Grid.Row="1" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding Camera2DCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/Camera2D64.png" Width="54" Height="54"/>
                                <TextBlock Text="Camera 2D" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 1: Camera 3D -->
                        <Button Grid.Row="1" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding Camera3DCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/Camera3D64.png" Width="54" Height="54"/>
                                <TextBlock Text="Camera 3D" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 0: North Lock 2D -->
                        <Button Grid.Row="2" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding CameraNorth2DCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/CameraNorth2D.png" Width="54" Height="54"/>
                                <TextBlock Text="North Lock 2D" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 1: Toggle Grid -->
                        <Button Grid.Row="2" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding ToggleGridCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/GridRotate.png" Width="54" Height="54"/>
                                <TextBlock Text="Toggle Grid" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 0: Day/Night Mode -->
                        <Button Grid.Row="3" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding ToggleDayNightCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/WindowNightMode.png" Width="54" Height="54"/>
                                <TextBlock Text="Day/Night Mode" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 1: Hz Display (non-interactive) -->
                        <Border Grid.Row="3" Grid.Column="1" Height="72" Background="#402a2a2a" CornerRadius="4" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16" VerticalAlignment="Center" Margin="12,0">
                                <TextBlock Text="Display Rate" FontSize="18" Foreground="White" VerticalAlignment="Center"/>
                                <TextBlock Text="60 Hz" FontSize="20" FontWeight="Bold" Foreground="#4CAF50" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>

                        <!-- Row 4, Col 0: Brightness Down -->
                        <Button Grid.Row="4" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding BrightnessDownCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/BrightnessDn.png" Width="54" Height="54"/>
                                <TextBlock VerticalAlignment="Center" FontSize="18" Foreground="White">
                                    <Run Text="Brightness"/>
                                    <Run Text="20%" FontWeight="Bold" Foreground="#FFA500"/>
                                </TextBlock>
                            </StackPanel>
                        </Button>

                        <!-- Row 4, Col 1: Brightness Up -->
                        <Button Grid.Row="4" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2"
                                Command="{Binding BrightnessUpCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/BrightnessUp.png" Width="54" Height="54"/>
                                <TextBlock Text="Brightness Up" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Tools Overlay: Touch-Friendly Transparent Panel -->
        <Border Grid.Row="1"
                x:Name="PanelTools"
                IsVisible="False"
                Background="#CC1a1a1a"
                Width="900" Height="400"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                CornerRadius="8"
                BoxShadow="0 8 16 0 #80000000">
            <Grid RowDefinitions="Auto,*">
                <!-- Draggable Header with title and close button -->
                <Border Grid.Row="0" Background="#402a2a2a" Padding="16,12" CornerRadius="8,8,0,0"
                        x:Name="PanelToolsHeader"
                        PointerPressed="PanelToolsHeader_PointerPressed"
                        PointerMoved="PanelToolsHeader_PointerMoved"
                        PointerReleased="PanelToolsHeader_PointerReleased"
                        Cursor="Hand">
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Grid.Column="0" Text="Tools &amp; Wizards" FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                        <Button Grid.Column="1" Width="40" Height="40" Background="Transparent" BorderThickness="0"
                                Content="✕" FontSize="20" Foreground="White" Click="BtnTools_Click"
                                ToolTip.Tip="Close"/>
                    </Grid>
                </Border>

                <!-- 3-column grid layout -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <Grid ColumnDefinitions="*,*,*" RowDefinitions="Auto,Auto,Auto,Auto" Margin="8">
                        <!-- Row 0, Col 0: Steer Wizard -->
                        <Button Grid.Row="0" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/AutoSteerOn.png" Width="54" Height="54"/>
                                <TextBlock Text="Steer Wizard" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 0, Col 1: Steer Chart -->
                        <Button Grid.Row="0" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/AutoSteerOn.png" Width="54" Height="54"/>
                                <TextBlock Text="Steer Chart" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 0, Col 2: Heading Chart -->
                        <Button Grid.Row="0" Grid.Column="2" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/ConS_SourcesHeading.png" Width="54" Height="54"/>
                                <TextBlock Text="Heading Chart" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 0: XTE Chart -->
                        <Button Grid.Row="1" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/AutoManualIsAuto.png" Width="54" Height="54"/>
                                <TextBlock Text="XTE Chart" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 1: Roll Check -->
                        <Button Grid.Row="1" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/ConS_SourcesRoll.png" Width="54" Height="54"/>
                                <TextBlock Text="Roll Check" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 2: Boundary Tool -->
                        <Button Grid.Row="1" Grid.Column="2" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/Boundary.png" Width="54" Height="54"/>
                                <TextBlock Text="Boundary Tool" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 0: Event Viewer -->
                        <Button Grid.Row="2" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/ABTracks.png" Width="54" Height="54"/>
                                <TextBlock Text="Event Viewer" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 1: Extra Guidelines -->
                        <Button Grid.Row="2" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/ConD_ExtraGuides.png" Width="54" Height="54"/>
                                <TextBlock Text="Extra Guidelines" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 2: Smooth AB Curve -->
                        <Button Grid.Row="2" Grid.Column="2" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/ABSmooth.png" Width="54" Height="54"/>
                                <TextBlock Text="Smooth AB Curve" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 0: Delete Contour Paths -->
                        <Button Grid.Row="3" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/TrashContourRef.png" Width="54" Height="54"/>
                                <TextBlock Text="Delete Contour Paths" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 1: Webcam -->
                        <Button Grid.Row="3" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/Webcam.png" Width="54" Height="54"/>
                                <TextBlock Text="Webcam" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 2: Offset Fix -->
                        <Button Grid.Row="3" Grid.Column="2" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/YouTurnReverse.png" Width="54" Height="54"/>
                                <TextBlock Text="Offset Fix" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Configuration Overlay: Touch-Friendly Transparent Panel -->
        <Border Grid.Row="1"
                x:Name="PanelConfiguration"
                IsVisible="False"
                Background="#CC1a1a1a"
                Width="650" Height="400"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                CornerRadius="8"
                BoxShadow="0 8 16 0 #80000000">
            <Grid RowDefinitions="Auto,*">
                <!-- Draggable Header with title and close button -->
                <Border Grid.Row="0" Background="#402a2a2a" Padding="16,12" CornerRadius="8,8,0,0"
                        x:Name="PanelConfigurationHeader"
                        PointerPressed="PanelConfigurationHeader_PointerPressed"
                        PointerMoved="PanelConfigurationHeader_PointerMoved"
                        PointerReleased="PanelConfigurationHeader_PointerReleased"
                        Cursor="Hand">
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Grid.Column="0" Text="Configuration" FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                        <Button Grid.Column="1" Width="40" Height="40" Background="Transparent" BorderThickness="0"
                                Content="✕" FontSize="20" Foreground="White" Click="BtnConfiguration_Click"
                                ToolTip.Tip="Close"/>
                    </Grid>
                </Border>

                <!-- 2-column grid layout -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto" Margin="8">
                        <!-- Row 0, Col 0: Configuration -->
                        <Button Grid.Row="0" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/Settings48.png" Width="54" Height="54"/>
                                <TextBlock Text="Configuration" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 0, Col 1: Auto Steer -->
                        <Button Grid.Row="0" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/AutoSteerOff.png" Width="54" Height="54"/>
                                <TextBlock Text="Auto Steer" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 0: View All Settings -->
                        <Button Grid.Row="1" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/ScreenShot.png" Width="54" Height="54"/>
                                <TextBlock Text="View All Settings" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 1: Working Directories -->
                        <Button Grid.Row="1" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/FileOpen.png" Width="54" Height="54"/>
                                <TextBlock Text="Working Directories" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 0: GPS Data -->
                        <Button Grid.Row="2" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/GPSQuality.png" Width="54" Height="54"/>
                                <TextBlock Text="GPS Data" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 1: Colors -->
                        <Button Grid.Row="2" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/ColourPick.png" Width="54" Height="54"/>
                                <TextBlock Text="Colors" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 0: Section Colors -->
                        <Button Grid.Row="3" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/SectionMapping.png" Width="54" Height="54"/>
                                <TextBlock Text="Section Colors" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 1: Hotkeys -->
                        <Button Grid.Row="3" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/ConD_KeyBoard.png" Width="54" Height="54"/>
                                <TextBlock Text="Hotkeys" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Field Tools Overlay: Touch-Friendly Transparent Panel -->
        <Border Grid.Row="1"
                x:Name="PanelFieldTools"
                IsVisible="False"
                Background="#CC1a1a1a"
                Width="650" Height="400"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                CornerRadius="8"
                BoxShadow="0 8 16 0 #80000000">
            <Grid RowDefinitions="Auto,*">
                <!-- Draggable Header with title and close button -->
                <Border Grid.Row="0" Background="#402a2a2a" Padding="16,12" CornerRadius="8,8,0,0"
                        x:Name="PanelFieldToolsHeader"
                        PointerPressed="PanelFieldToolsHeader_PointerPressed"
                        PointerMoved="PanelFieldToolsHeader_PointerMoved"
                        PointerReleased="PanelFieldToolsHeader_PointerReleased"
                        Cursor="Hand">
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Grid.Column="0" Text="Field Tools" FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                        <Button Grid.Column="1" Width="40" Height="40" Background="Transparent" BorderThickness="0"
                                Content="✕" FontSize="20" Foreground="White" Click="BtnFieldTools_Click"
                                ToolTip.Tip="Close"/>
                    </Grid>
                </Border>

                <!-- 2-column grid layout -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto" Margin="8">
                        <!-- Row 0, Col 0: Boundary -->
                        <Button Grid.Row="0" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/Boundary.png" Width="54" Height="54"/>
                                <TextBlock Text="Boundary" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 0, Col 1: Headland -->
                        <Button Grid.Row="0" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/HeadlandBuild.png" Width="54" Height="54"/>
                                <TextBlock Text="Headland" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 0: Headland Build -->
                        <Button Grid.Row="1" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/Headache.png" Width="54" Height="54"/>
                                <TextBlock Text="Headland Build" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 1, Col 1: TramLines All -->
                        <Button Grid.Row="1" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/TramAll.png" Width="54" Height="54"/>
                                <TextBlock Text="TramLines All" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 0: Tramlines Multi -->
                        <Button Grid.Row="2" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/TramMulti.png" Width="54" Height="54"/>
                                <TextBlock Text="Tramlines Multi" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 2, Col 1: Delete Applied -->
                        <Button Grid.Row="2" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/TrashApplied.png" Width="54" Height="54"/>
                                <TextBlock Text="Delete Applied" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 0: Flag By Lat Lon -->
                        <Button Grid.Row="3" Grid.Column="0" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/FlagRed.png" Width="54" Height="54"/>
                                <TextBlock Text="Flag By Lat Lon" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Row 3, Col 1: Recorded Path -->
                        <Button Grid.Row="3" Grid.Column="1" Height="72" Background="#402a2a2a" BorderThickness="0" HorizontalContentAlignment="Left" HorizontalAlignment="Stretch" Padding="12" Margin="2">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <Image Source="/Assets/Icons/RecPath.png" Width="54" Height="54"/>
                                <TextBlock Text="Recorded Path" VerticalAlignment="Center" FontSize="18" Foreground="White"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Individual Floating Buttons (Each independently draggable) -->

        <!-- 1. Navigation Settings Button -->
        <Border x:Name="FloatingBtn1"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtn1_PointerPressed"
                PointerMoved="FloatingBtn1_PointerMoved"
                PointerReleased="FloatingBtn1_PointerReleased"
                Cursor="Hand">
            <Button x:Name="BtnNavigation"
                    Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Navigation Settings"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/NavigationSettings.png" Width="52" Height="46"/>
            </Button>
        </Border>

        <!-- 2. Wizards/Tools Button -->
        <Border x:Name="FloatingBtn2"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,86,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtn2_PointerPressed"
                PointerMoved="FloatingBtn2_PointerMoved"
                PointerReleased="FloatingBtn2_PointerReleased"
                Cursor="Hand">
            <Button x:Name="BtnTools"
                    Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Wizards Menu"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/SpecialFunctions.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- 3. Configuration Button -->
        <Border x:Name="FloatingBtn3"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,164,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtn3_PointerPressed"
                PointerMoved="FloatingBtn3_PointerMoved"
                PointerReleased="FloatingBtn3_PointerReleased"
                Cursor="Hand">
            <Button x:Name="BtnConfiguration"
                    Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Configuration"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/Settings48.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- 4. Field Manager Button -->
        <Border x:Name="FloatingBtn4"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,242,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtn4_PointerPressed"
                PointerMoved="FloatingBtn4_PointerMoved"
                PointerReleased="FloatingBtn4_PointerReleased"
                Cursor="Hand">
            <Button x:Name="BtnFieldManager"
                    Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Field Manager"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/JobActive.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- 5. Field Tools Button -->
        <Border x:Name="FloatingBtn5"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,320,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtn5_PointerPressed"
                PointerMoved="FloatingBtn5_PointerMoved"
                PointerReleased="FloatingBtn5_PointerReleased"
                Cursor="Hand">
            <Button x:Name="BtnFieldTools"
                    Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Field Tools Menu"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/FieldTools.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- 6. Auto Steer Config Button -->
        <Border x:Name="FloatingBtn6"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,398,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtn6_PointerPressed"
                PointerMoved="FloatingBtn6_PointerMoved"
                PointerReleased="FloatingBtn6_PointerReleased"
                Cursor="Hand">
            <Button x:Name="BtnAutoSteerConfig"
                    Background="Transparent" BorderThickness="0" Padding="8"
                    HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                    HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
                    ToolTip.Tip="Auto Steer Configuration"
                    IsHitTestVisible="False">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Stretch">
                    <TextBlock Text="0.0" FontSize="16" FontWeight="Bold" Foreground="White"
                               HorizontalAlignment="Center" TextAlignment="Center"/>
                    <TextBlock Text="0.0" FontSize="16" FontWeight="Bold" Foreground="White"
                               HorizontalAlignment="Center" TextAlignment="Center" Margin="0,4,0,0"/>
                </StackPanel>
            </Button>
        </Border>

        <!-- 7. Data I/O Status Button -->
        <Border x:Name="FloatingBtn7"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,476,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtn7_PointerPressed"
                PointerMoved="FloatingBtn7_PointerMoved"
                PointerReleased="FloatingBtn7_PointerReleased"
                Cursor="Hand">
            <Button x:Name="BtnDataIO"
                    Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Data I/O Status"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/AgIO.png" Width="52" Height="66"/>
            </Button>
        </Border>

        <!-- RIGHT PANEL FLOATING BUTTONS (FloatingBtnR1-R9) -->

        <!-- R1. Auto Steer -->
        <Border x:Name="FloatingBtnR1"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR1_PointerPressed"
                PointerMoved="FloatingBtnR1_PointerMoved"
                PointerReleased="FloatingBtnR1_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Auto Steer"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/AutoSteerOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- R2. Auto YouTurn -->
        <Border x:Name="FloatingBtnR2"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR2_PointerPressed"
                PointerMoved="FloatingBtnR2_PointerMoved"
                PointerReleased="FloatingBtnR2_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Auto YouTurn"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/YouTurnNo.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- R3. Section Master Auto -->
        <Border x:Name="FloatingBtnR3"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR3_PointerPressed"
                PointerMoved="FloatingBtnR3_PointerMoved"
                PointerReleased="FloatingBtnR3_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Section Control Auto"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/SectionMasterOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- R4. Section Master Manual -->
        <Border x:Name="FloatingBtnR4"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR4_PointerPressed"
                PointerMoved="FloatingBtnR4_PointerMoved"
                PointerReleased="FloatingBtnR4_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Section Control Manual"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/ManualOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- R5. Auto Track -->
        <Border x:Name="FloatingBtnR5"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR5_PointerPressed"
                PointerMoved="FloatingBtnR5_PointerMoved"
                PointerReleased="FloatingBtnR5_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Auto Track"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/AutoTrackOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- R6. Cycle Lines Backward -->
        <Border x:Name="FloatingBtnR6"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR6_PointerPressed"
                PointerMoved="FloatingBtnR6_PointerMoved"
                PointerReleased="FloatingBtnR6_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Cycle Lines Backward"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/ABLineCycleBk.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- R7. Cycle Lines Forward -->
        <Border x:Name="FloatingBtnR7"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR7_PointerPressed"
                PointerMoved="FloatingBtnR7_PointerMoved"
                PointerReleased="FloatingBtnR7_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Cycle Lines Forward"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/ABLineCycle.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- R8. Contour Mode -->
        <Border x:Name="FloatingBtnR8"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR8_PointerPressed"
                PointerMoved="FloatingBtnR8_PointerMoved"
                PointerReleased="FloatingBtnR8_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Contour Mode"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/ContourOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- R9. Contour Lock -->
        <Border x:Name="FloatingBtnR9"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnR9_PointerPressed"
                PointerMoved="FloatingBtnR9_PointerMoved"
                PointerReleased="FloatingBtnR9_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Contour Lock"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/ColorUnlocked.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- BOTTOM PANEL FLOATING BUTTONS (FloatingBtnB1-B11) -->

        <!-- B1. Track Mode -->
        <Border x:Name="FloatingBtnB1"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB1_PointerPressed"
                PointerMoved="FloatingBtnB1_PointerMoved"
                PointerReleased="FloatingBtnB1_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Track Mode"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/TrackOn.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B2. Snap to Pivot -->
        <Border x:Name="FloatingBtnB2"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB2_PointerPressed"
                PointerMoved="FloatingBtnB2_PointerMoved"
                PointerReleased="FloatingBtnB2_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Snap to Pivot"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/SnapToPivot.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B3. Snap Right -->
        <Border x:Name="FloatingBtnB3"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB3_PointerPressed"
                PointerMoved="FloatingBtnB3_PointerMoved"
                PointerReleased="FloatingBtnB3_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Snap Right"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/SnapRight.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B4. Snap Left -->
        <Border x:Name="FloatingBtnB4"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB4_PointerPressed"
                PointerMoved="FloatingBtnB4_PointerMoved"
                PointerReleased="FloatingBtnB4_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Snap Left"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/SnapLeft.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B5. Flag/Marker -->
        <Border x:Name="FloatingBtnB5"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB5_PointerPressed"
                PointerMoved="FloatingBtnB5_PointerMoved"
                PointerReleased="FloatingBtnB5_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Drop Marker Flags"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/FlagRed.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B6. Headland Mode -->
        <Border x:Name="FloatingBtnB6"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB6_PointerPressed"
                PointerMoved="FloatingBtnB6_PointerMoved"
                PointerReleased="FloatingBtnB6_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Headland Mode"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/HeadlandOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B7. Hydraulic Lift -->
        <Border x:Name="FloatingBtnB7"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB7_PointerPressed"
                PointerMoved="FloatingBtnB7_PointerMoved"
                PointerReleased="FloatingBtnB7_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Hydraulic Lift"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/HydraulicLiftOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B8. Tram Display -->
        <Border x:Name="FloatingBtnB8"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB8_PointerPressed"
                PointerMoved="FloatingBtnB8_PointerMoved"
                PointerReleased="FloatingBtnB8_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Tram Display"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/TramOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B9. Reset Tool Heading -->
        <Border x:Name="FloatingBtnB9"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB9_PointerPressed"
                PointerMoved="FloatingBtnB9_PointerMoved"
                PointerReleased="FloatingBtnB9_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Reset Tool Heading"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/ResetTool.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B10. Section Mapping Color -->
        <Border x:Name="FloatingBtnB10"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB10_PointerPressed"
                PointerMoved="FloatingBtnB10_PointerMoved"
                PointerReleased="FloatingBtnB10_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="Section Mapping Color"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/SectionMapping.png" Width="54" Height="54"/>
            </Button>
        </Border>

        <!-- B11. YouTurn Skip -->
        <Border x:Name="FloatingBtnB11"
                Grid.Row="1" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Background="Transparent"
                BorderBrush="#B0B0B0"
                BorderThickness="2"
                CornerRadius="8"
                BoxShadow="0 4 8 0 #80000000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="8,8,0,0"
                Width="70"
                Height="70"
                ZIndex="100"
                PointerPressed="FloatingBtnB11_PointerPressed"
                PointerMoved="FloatingBtnB11_PointerMoved"
                PointerReleased="FloatingBtnB11_PointerReleased"
                Cursor="Hand">
            <Button Background="Transparent" BorderThickness="0" Padding="8"
                    ToolTip.Tip="YouTurn Skip"
                    IsHitTestVisible="False">
                <Image Source="/Assets/Icons/YouSkipOff.png" Width="54" Height="54"/>
            </Button>
        </Border>

    </Grid>
</Window>
