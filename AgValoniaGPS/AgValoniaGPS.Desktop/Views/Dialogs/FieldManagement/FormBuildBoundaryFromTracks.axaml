<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:AgValoniaGPS.ViewModels.Dialogs.FieldManagement"
        x:Class="AgValoniaGPS.Desktop.Views.Dialogs.FieldManagement.FormBuildBoundaryFromTracks"
        x:DataType="vm:BuildBoundaryFromTracksViewModel"
        Title="Build Boundary from Tracks"
        Width="600" Height="450"
        WindowStartupLocation="CenterOwner">

    <Grid RowDefinitions="Auto,*,Auto,Auto" Margin="16">
        <TextBlock Grid.Row="0" Text="Convert GPS Track to Boundary" FontWeight="Bold" FontSize="16" Margin="0,0,0,12"/>

        <Grid Grid.Row="1" ColumnDefinitions="*,200" ColumnSpacing="16">
            <ListBox Grid.Column="0" Items="{Binding Tracks}" SelectedItem="{Binding SelectedTrack}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding PointCount, StringFormat='Points: {0}'}" FontSize="12"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <StackPanel Grid.Column="1" Spacing="12">
                <TextBlock Text="Buffer Distance (m)" FontWeight="SemiBold"/>
                <NumericUpDown Value="{Binding BufferDistance}" Minimum="0.5" Maximum="50" FormatString="F1"/>

                <TextBlock Text="Simplify Tolerance (m)" FontWeight="SemiBold"/>
                <NumericUpDown Value="{Binding SimplifyTolerance}" Minimum="0.1" Maximum="10" FormatString="F1"/>

                <TextBlock Text="{Binding ResultPointCount, StringFormat='Result Points: {0}'}" Margin="0,12,0,0"/>

                <Button Content="Preview" Command="{Binding PreviewCommand}" Height="36"/>
            </StackPanel>
        </Grid>

        <TextBlock Grid.Row="2" Text="{Binding ErrorMessage}" Foreground="Red" IsVisible="{Binding HasError}" Margin="0,8"/>

        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8" Margin="0,16,0,0">
            <Button Content="Generate" Command="{Binding GenerateCommand}" Width="100" Height="36"/>
            <Button Content="Cancel" Command="{Binding CancelCommand}" Width="100" Height="36"/>
        </StackPanel>
    </Grid>
</Window>
